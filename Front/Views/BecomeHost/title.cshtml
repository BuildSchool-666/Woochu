<div class="d-flex" id="app">
    <div class="left position-relative" style="width:50%;">
        <video autoplay controls muted loop class="video"   style="object-fit: cover; object-position:center top;">
            <source src="https://a0.muscache.com/v/33/20/3320c65c-5167-5999-ad8b-89c6c0c27b53/3320c65c51675999ad8b89c6c0c27b53_4000k_1.mp4" type="video/mp4" style="box-sizing: border-box;" playsinline preload ="auto">
        </video>
        <h1><strong>來為房源取名吧</strong></h1>
    </div>
    <div class="right">
        <div class="d-flex">
            <div class="btngroup">
                <a href="~/BecomeHost/Index" class="btn-h"><strong>退出</strong></a>
            </div>
                
            <div class="title">
                <p style="font-size:22px;"><strong>建立標題</strong></p>   
                <textarea v-model="title" name="" id="" cols="30" rows="10" class="inputtext" placeholder="配備游泳池的溫馨私有公寓"  :class="{'is-invalid':TitleInput}"></textarea>
            </div>

            <div class="last-bar">
                <a href="~/BecomeHost/photo" class="back"><strong>返回</strong></a>
                <button v-on:click="Next()" type="button" class="next text-white" id="next" :style="checkedStyle" v-bind:disabled="addVerify">下一步</button>
            </div>
        </div>
    </div>
</div>

@section TopCSS{
<style>
    .video{
        display: block;
        height: 100vh;
        width: 100%;
        position: fixed;
        top: -30vh;
        box-sizing: border-box;
    }
    h1{
        width: 100vh;
        position: relative;
        top: 20vh;
        padding: 10px;
        font-size: 48px;
        color: white;
    }


    .right {
        width: 100%;
        height: 60vh;
        position: fixed;
        right: 0;
        bottom: -15vh;
        overflow: scroll;
        background-color: white;
        border-top-left-radius: 15px;
        border-top-right-radius: 15px;
    }


    .btngroup {
        width: 100%;
        position: fixed;
        top:0;
        right: -50%;
        background-color: transparent;
        padding-top: 20px;
        padding-bottom: 20px; 
        justify-content: flex-end;
        z-index: 0;
    }

    .btn-h {
        text-decoration: none;
        color: black;
        width: 20%;
        background-color: #F0F0F0;
        border-radius: 20px;
        border: none;
        margin: 10px;
        padding: 5px 10px;
        transition-duration: 1s;
        font-size: 10px;
    }
    .btn-h:hover {
        color: white;
        background-color: red;
    }

    .last-bar {
        position: fixed;
        width: 100%;
        right:0;
        bottom:0;   
        background-color: white;
        padding: 20px;
        border-top: 2px solid #F0F0F0;
        display: flex;
        justify-content: space-between;
    
    }

    .back {
        display: flex;
        align-items: center;
        justify-content: center;
        text-decoration: none;
        color: white;
        width: 20vh;
        position: relative;
        top: 0;
        left: 0;
        border-radius: 10px;
        background-color: #D0D0D0;
        border: none;
        transition-duration: 1s;
    }

    .back:hover {
        background-color: black;
        color: white;
    }

    .next {
        position: relative;
        right:0;
        top:0;
        padding:10px 15px;
        width: 20vh;
        border-radius:10px;
        border: none;
        background-color: #D0D0D0;
    }

    .title{
        position: relative;
        top: 5vh;
        margin-left: 50px;
        width: 100%;
        height: 400px;
        padding-right: 10vh;
    }

    ::-webkit-scrollbar {
        width: 0px;
        }

    .inputtext{
        width: 100%;
        height: 30vh;
        padding: 24px;
        border:1px solid #D0D0D0;
        border-radius: 10px;
    }

    ::-webkit-input-placeholder { 
        font-size: 25px;
    
    }
</style>
<style media="screen and (min-width:744px)">
    .left{
        float: left;
        width: 50%;
        height: 100vh;
    }

    .video{
        float: left;
        position: relative;
        top: 0;
    }
    h1{
        top: -45vh;
    }


    .right {
        width: 50%;
        height: 100vh;
        bottom: 0;
    }


    .btngroup {
            right:-25%;
            width: 50%;
            background-color: white;
    }

    .btn-h {
        height: 35px;
            padding: 5px 15px;
    }

    .last-bar {
        width: 50%;
        
    }


    .title{
        position: fixed;
        top: 30vh;
        margin-left: 70px;
        width: 40%;
        height: 350px;
    }
</style>
}

@section EndJS{
   @* <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>*@
    
@*    <script>
        document.querySelector("textarea").onkeyup = function(){
            document.querySelector('#next').style.background= "black";
            //document.querySelector("#next").onclick = function(){
            //    location.href = "https://shichyilim.github.io/Project/description.html";
            //}
        }
    </script>*@
    <script>
         let app = new Vue({
            el:"#app",
            data:{
                title:'',
                addVerify: true,
                TitleInput:false
            },
            watch:{
                title:{
                    immediate: true,
                    handler: function(){
                        if(this.title == '')
                        {
                            this.TitleInput = true
                        }
                        else
                        {
                            this.TitleInput = false 
                        }
                        this.checkAddVerify()
                    }
                }
            },
            computed: {
                checkedStyle() {
                    return {
                        backgroundColor: this.addVerify ? '#D0D0D0' : 'black',
                    }
                }
            },
            methods:{
                checkAddVerify(){
                    if(this.TitleInput == true)
                    {
                        this.addVerify = true
                        return
                    }
                    this.addVerify = false;
                },
                Next(){
                    const title = this.title
                    var obj = JSON.parse(sessionStorage['currentRoom'])
                    Object.assign(obj,{'RoomName': title})
                    sessionStorage.removeItem('currentRoom');
                    sessionStorage.setItem('currentRoom',JSON.stringify(obj))
                    window.location = 'description';
                }
            }
        })
    </script>
}
